{"version":3,"sources":["ball.js"],"names":["cc","Class","extends","Component","properties","acceleration","onLoad","accLeft","accRight","accUp","accDown","xSpeed","ySpeed","ballSize","width","height","setInputControl","self","eventManager","addListener","event","EventListener","KEYBOARD","onKeyPressed","keyCode","KEY","a","d","w","s","onKeyReleased","node","update","dt","x","y"],"mappings":"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","file":"ball.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\t\tacceleration: 0\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n\t\t// switch of acceleration direction\r\n        this.accLeft = false;\r\n        this.accRight = false;\r\n\t\tthis.accUp = false;\r\n\t\tthis.accDown = false;\r\n        // current horizontal speed of main character\r\n        this.xSpeed = 0;\r\n\t\tthis.ySpeed = 0;\r\n\t\t\r\n\t\t// ball\r\n\t\tthis.ballSize = 127/2;\r\n\t\t\r\n\t\t// canvas \r\n\t\tthis.width = 960/2;\r\n\t\tthis.height = 640/2;\r\n\t\t\r\n\t\tthis.setInputControl();\r\n    },\r\n\r\n\tsetInputControl: function () {\r\n        var self = this;\r\n        // add keyboard event listener\r\n        cc.eventManager.addListener({\r\n            event: cc.EventListener.KEYBOARD,\r\n            // When there is a key being pressed down, judge if it's the designated directional button and set up acceleration in the corresponding direction\r\n            onKeyPressed: function(keyCode, event) {\r\n                switch(keyCode) {\r\n                    case cc.KEY.a:\r\n                        self.accLeft = true;\r\n                        self.accRight = false;\r\n                        break;\r\n                    case cc.KEY.d:\r\n                        self.accLeft = false;\r\n                        self.accRight = true;\r\n                        break;\r\n                    case cc.KEY.w:\r\n                        self.accUp = true;\r\n                        self.accDown = false;\r\n                        break;\r\n                    case cc.KEY.s:\r\n                        self.accUp = false;\r\n                        self.accDown = true;\r\n                        break;\r\n\t\t\t\t\t\t\r\n                }\r\n            },\r\n            // when releasing the button, stop acceleration in this direction\r\n            onKeyReleased: function(keyCode, event) {\r\n                switch(keyCode) {\r\n                    case cc.KEY.a:\r\n                        self.accLeft = false;\r\n                        break;\r\n                    case cc.KEY.d:\r\n                        self.accRight = false;\r\n                        break;\r\n                    case cc.KEY.w:\r\n                        self.accUp = false;\r\n                        break;\t\t\r\n                    case cc.KEY.s:\r\n                        self.accDown = false;\r\n                        break;\t\t\t\t\t\t\r\n                }\r\n            }\r\n        }, self.node);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n\t\r\n\t\t// update speed of each frame according to the current acceleration direction\r\n        if (this.accLeft) {\r\n            this.xSpeed -= this.acceleration *5 *dt;\r\n\t\t\t\r\n\t\t\tif(this.node.x <= (-1*this.width+this.ballSize)) this.xSpeed = 0;\r\n\t\t\t\r\n        } else if (this.accRight) {\r\n            this.xSpeed += this.acceleration *5 *dt;\r\n\t\t\t\r\n\t\t\tif(this.node.x >= (this.width-this.ballSize)) this.xSpeed = 0;\r\n\t\t\t\r\n        } else {\r\n\t\t\tthis.xSpeed = 0;\r\n\t\t}\r\n\t\t// up and down\r\n\t\tif (this.accUp) {\r\n            this.ySpeed += this.acceleration *5 *dt;\r\n\t\t\t\r\n\t\t\t\tif(this.node.y >= (this.height-this.ballSize)) this.ySpeed = 0;\r\n\t\t\t\r\n        } else if (this.accDown) {\r\n            this.ySpeed -= this.acceleration *5 *dt;\r\n\t\t\t\tif(this.node.y <= (-1*this.height+this.ballSize)) this.ySpeed = 0;\r\n\t\t\t\r\n        } else {\r\n\t\t\tthis.ySpeed = 0;\r\n\t\t}\r\n        // update the position of the main character according to the current speed\r\n        this.node.x += this.xSpeed *  dt;\r\n        this.node.y += this.ySpeed *  dt;\r\n\t\r\n    },\r\n\t\r\n});\r\n"]}